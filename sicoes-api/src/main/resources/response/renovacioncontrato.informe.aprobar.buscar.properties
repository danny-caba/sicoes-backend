# Configuración RAML para el endpoint de búsqueda de informes para aprobación
# GET /informe/renovacion/aprobar/buscar

# Descripción del endpoint
endpoint.description=Busca informes de renovación de contrato pendientes de aprobación con filtros avanzados
endpoint.displayName=Buscar Informes para Aprobación - GSE
endpoint.group=Informe Presupuestal
endpoint.subgroup=Bandeja Aprobaciones
endpoint.groupNumber=Grupo 7
endpoint.version=1.0
endpoint.action=Buscar

# Parámetros de consulta
query.numeroExpediente.description=Número de expediente para filtrar informes
query.numeroExpediente.required=false
query.numeroExpediente.type=string
query.numeroExpediente.maxLength=50
query.numeroExpediente.example=EXP-2024-0001

query.tipoSector.description=Tipo de sector (ELECTRICO, GAS, etc.)
query.tipoSector.required=false
query.tipoSector.type=string
query.tipoSector.maxLength=50
query.tipoSector.example=ELECTRICO

query.tipoSubSector.description=Tipo de subsector
query.tipoSubSector.required=false
query.tipoSubSector.type=string
query.tipoSubSector.maxLength=50
query.tipoSubSector.example=TRANSMISION

query.nombreItem.description=Nombre del item de la renovación
query.nombreItem.required=false
query.nombreItem.type=string
query.nombreItem.maxLength=200
query.nombreItem.example=Supervisión de obras

query.razSocialSupervisora.description=Razón social de la empresa supervisora
query.razSocialSupervisora.required=false
query.razSocialSupervisora.type=string
query.razSocialSupervisora.maxLength=200
query.razSocialSupervisora.example=SUPERVISORA ABC S.A.C.

query.estadoInforme.description=Estado del informe (1=Pendiente, 2=En_Revision, 3=Aprobado, 4=Rechazado)
query.estadoInforme.required=false
query.estadoInforme.type=integer
query.estadoInforme.enum=[1,2,3,4]
query.estadoInforme.example=1

query.grupoAprobador.description=Grupo aprobador (1=Grupo_1, 2=Grupo_2, 7=GSE)
query.grupoAprobador.required=false
query.grupoAprobador.type=integer
query.grupoAprobador.enum=[1,2,7]
query.grupoAprobador.example=7

query.prioridad.description=Prioridad del informe (1=Alta, 2=Media, 3=Baja)
query.prioridad.required=false
query.prioridad.type=integer
query.prioridad.enum=[1,2,3]
query.prioridad.example=1

query.fechaDesde.description=Fecha desde para filtrar por fecha de creación (formato dd/MM/yyyy)
query.fechaDesde.required=false
query.fechaDesde.type=string
query.fechaDesde.pattern=^\\d{2}/\\d{2}/\\d{4}$
query.fechaDesde.example=01/01/2024

query.fechaHasta.description=Fecha hasta para filtrar por fecha de creación (formato dd/MM/yyyy)
query.fechaHasta.required=false
query.fechaHasta.type=string
query.fechaHasta.pattern=^\\d{2}/\\d{2}/\\d{4}$
query.fechaHasta.example=31/12/2024

query.soloVencidos.description=Mostrar solo informes vencidos
query.soloVencidos.required=false
query.soloVencidos.type=boolean
query.soloVencidos.default=false
query.soloVencidos.example=true

query.soloAsignados.description=Mostrar solo informes asignados al usuario actual
query.soloAsignados.required=false
query.soloAsignados.type=boolean
query.soloAsignados.default=false
query.soloAsignados.example=false

# Parámetros de paginación
query.page.description=Número de página (iniciando en 0)
query.page.required=false
query.page.type=integer
query.page.default=0
query.page.example=0

query.size.description=Tamaño de página
query.size.required=false
query.size.type=integer
query.size.default=10
query.size.example=10

query.sort.description=Campo y dirección de ordenamiento
query.sort.required=false
query.sort.type=string
query.sort.example=fechaCreacionInforme,desc

# Respuesta exitosa
response.200.description=Lista paginada de informes pendientes de aprobación
response.200.type=Page<InformeAprobacionResponseDTO>
response.200.example={"content":[{"idInformeRenovacion":1,"numeroExpediente":"EXP-2024-0001","nombreItem":"Supervisión de obras","tipoSector":"ELECTRICO","tipoSubSector":"TRANSMISION","razSocialSupervisora":"SUPERVISORA ABC S.A.C.","numeroRucSupervisora":"20123456789","nombreRepresentante":"Juan Pérez García","estadoInforme":1,"descripcionEstado":"Pendiente","grupoAprobador":7,"descripcionGrupoAprobador":"GSE","fechaCreacionInforme":"2024-01-15T10:30:00","fechaVencimientoAprobacion":"2024-02-15T23:59:59","observaciones":"Informe pendiente de revisión","conclusiones":"Requiere aprobación","prioridad":1,"diasVencimiento":-5,"tipoInforme":"PRESUPUESTAL","montoAprobado":150000.00,"moneda":"PEN","idUsuarioCreacion":123,"nombreUsuarioCreacion":"María López","idUsuarioAsignado":456,"nombreUsuarioAsignado":"Carlos Rodríguez","idRequerimientoRenovacion":789,"rutaAdjuntoInforme":"uuid-archivo-adjunto","nombreArchivoInforme":"informe_presupuestal.pdf"}],"pageable":{"sort":{"sorted":false,"unsorted":true,"empty":true},"pageNumber":0,"pageSize":10,"offset":0,"unpaged":false,"paged":true},"totalElements":1,"totalPages":1,"last":true,"first":true,"numberOfElements":1,"size":10,"number":0,"sort":{"sorted":false,"unsorted":true,"empty":true},"empty":false}

# Respuestas de error
response.400.description=Parámetros de consulta inválidos
response.400.type=object
response.400.example={"error":"Bad Request","message":"Formato de fecha inválido","timestamp":"2024-01-15T10:30:00Z"}

response.403.description=Sin permisos para acceder a la bandeja de aprobaciones
response.403.type=object
response.403.example={"error":"Forbidden","message":"No tiene permisos para acceder a la bandeja de aprobaciones","timestamp":"2024-01-15T10:30:00Z"}

response.500.description=Error interno del servidor
response.500.type=object
response.500.example={"error":"Internal Server Error","message":"Error al procesar la búsqueda","timestamp":"2024-01-15T10:30:00Z"}

# Headers de respuesta
header.Content-Type.description=Tipo de contenido de la respuesta
header.Content-Type.type=string
header.Content-Type.example=application/json

# Seguridad
security.required=true
security.type=bearer
security.description=Token JWT requerido para autenticación y autorización

# Roles autorizados
security.roles=APROBADOR,GSE,TECNICO,ADMIN,SUPERVISOR
security.roles.description=Solo usuarios con estos roles pueden acceder a la bandeja de aprobaciones

# Tags para documentación
tags=Renovación de Contratos,Informes Presupuestales,Aprobaciones,GSE,Bandeja

# Notas adicionales
notes.usage=Este endpoint permite buscar informes de renovación de contrato que están pendientes de aprobación. Los filtros permiten una búsqueda granular según diferentes criterios.

notes.security=El endpoint requiere autenticación JWT y valida que el usuario tenga permisos para acceder a la bandeja de aprobaciones. Los usuarios solo ven informes según su grupo aprobador:
notes.security.gse=Usuarios GSE ven informes del Grupo 7
notes.security.grupo1=Usuarios del Grupo 1 ven informes del Grupo 1
notes.security.grupo2=Usuarios del Grupo 2 ven informes del Grupo 2
notes.security.admin=Administradores ven todos los informes

notes.filters=Filtros disponibles:
notes.filters.basic=Filtros básicos por expediente, sector, item, supervisora
notes.filters.status=Filtros por estado del informe y grupo aprobador
notes.filters.dates=Filtros por rango de fechas de creación
notes.filters.priority=Filtros por prioridad calculada automáticamente
notes.filters.special=Filtros especiales para informes vencidos y asignados

notes.priority=La prioridad se calcula automáticamente basada en días de vencimiento:
notes.priority.high=Alta (1): Informes vencidos (días < 0)
notes.priority.medium=Media (2): Informes por vencer (días <= 3)
notes.priority.low=Baja (3): Informes normales (días > 3)

notes.pagination=La respuesta está paginada. Use los parámetros page y size para controlar la paginación.

notes.sorting=Se puede ordenar por cualquier campo del DTO de respuesta. Campos recomendados:
notes.sorting.date=fechaCreacionInforme,desc - Por fecha de creación descendente
notes.sorting.priority=prioridad,asc - Por prioridad ascendente
notes.sorting.days=diasVencimiento,asc - Por días de vencimiento ascendente

notes.audit=Todas las consultas se registran en la bitácora del sistema para fines de auditoría.

notes.performance=Para grandes volúmenes de datos, considere usar filtros específicos para mejorar el rendimiento de la consulta.

# Ejemplos de uso
example.request.basic=GET /informe/renovacion/aprobar/buscar?grupoAprobador=7&estadoInforme=1&page=0&size=20
example.request.basic.description=Búsqueda básica de informes pendientes del grupo GSE

example.request.vencidos=GET /informe/renovacion/aprobar/buscar?soloVencidos=true&prioridad=1&sort=diasVencimiento,asc
example.request.vencidos.description=Búsqueda de informes vencidos de alta prioridad

example.request.asignados=GET /informe/renovacion/aprobar/buscar?soloAsignados=true&estadoInforme=2
example.request.asignados.description=Búsqueda de informes asignados al usuario actual en revisión

example.request.rango_fechas=GET /informe/renovacion/aprobar/buscar?fechaDesde=01/01/2024&fechaHasta=31/01/2024&tipoSector=ELECTRICO
example.request.rango_fechas.description=Búsqueda por rango de fechas y sector específico

# Configuración específica
business.rules.vencimiento=Los informes se consideran vencidos cuando la fecha de vencimiento es anterior a la fecha actual
business.rules.prioridad=La prioridad se recalcula en cada consulta basada en la fecha actual
business.rules.acceso=El acceso a informes se valida por grupo aprobador y permisos del usuario
business.rules.estados=Estados válidos: 1=Pendiente, 2=En_Revision, 3=Aprobado, 4=Rechazado